{"openapi":"3.0.0","paths":{"/api/postman":{"get":{"operationId":"AppController_getPostmanApiCollection","summary":"Return json data uses to import to Postman app","parameters":[],"responses":{"200":{"description":"Generated OpenAPI in JSON format successful"}},"tags":["Shared APIs"]}},"/api/health":{"get":{"operationId":"HealthController_check","summary":"Check all services are up or down","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","properties":{"status":{"type":"string"}},"additionalProperties":{"type":"string"}}}}}}}}}}},"/api/users":{"post":{"operationId":"UsersController_createUser","summary":"Create new user","description":"Create a new user with name","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserEntity"}}}},"400":{"description":"Invalid input data"}},"tags":["Users"]},"get":{"operationId":"UsersController_getAllUsers","summary":"Get all users","description":"Retrieve all users from the database","parameters":[],"responses":{"200":{"description":"Users retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserEntity"}}}}}},"tags":["Users"]}},"/api/metrics":{"post":{"operationId":"MetricsController_createMetric","summary":"Create new metric","description":"Add a new metric record with date, value, and unit","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMetricDto"}}}},"responses":{"201":{"description":"Metric created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MetricEntity"}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMetricResponseDto"}}}}},"tags":["Metrics"],"security":[{"bearer":[]}]},"get":{"operationId":"MetricsController_getMetricsByType","summary":"Get metrics by type","description":"Retrieve a list of all metrics filtered by type (Distance/Temperature) for a specific user","parameters":[{"name":"userId","required":true,"in":"query","description":"User ID","example":1,"schema":{"type":"number"}},{"name":"metricType","required":true,"in":"query","description":"Type of metric to filter by","example":"distance","schema":{"enum":["distance","temperature"],"type":"string"}},{"name":"page","required":false,"in":"query","description":"Page number for pagination","example":1,"schema":{"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","example":10,"schema":{"default":10,"type":"number"}}],"responses":{"200":{"description":"Metrics retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MetricListResponseDto"}}}},"400":{"description":"Invalid query parameters"}},"tags":["Metrics"],"security":[{"bearer":[]}]}},"/api/metrics/chart-data":{"get":{"operationId":"MetricsController_getChartData","summary":"Get chart data","description":"Get data for drawing charts with latest metric per day for specified time period. Supports unit conversion.","parameters":[{"name":"userId","required":true,"in":"query","description":"User ID","example":1,"schema":{"type":"number"}},{"name":"metricType","required":true,"in":"query","description":"Type of metric","example":"distance","schema":{"enum":["distance","temperature"],"type":"string"}},{"name":"timePeriod","required":true,"in":"query","description":"Time period in months","example":1,"schema":{"enum":[1,2],"type":"number"}},{"name":"targetUnit","required":false,"in":"query","description":"Target unit for conversion (optional)","example":"meter","schema":{"type":"string"}}],"responses":{"200":{"description":"Chart data retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChartDataResponseDto"}}}},"400":{"description":"Invalid query parameters"}},"tags":["Metrics"],"security":[{"bearer":[]}]}}},"info":{"title":"tracking-metrics","description":"Swagger document for tracking-metrics APIs","version":"1.0","contact":{}},"tags":[{"name":"tracking-metrics","description":""}],"servers":[{"url":"http://[::1]:5001"}],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"CreateUserDto":{"type":"object","properties":{"name":{"type":"string","description":"User name","example":"John_Doe_123","maxLength":60}},"required":["name"]},"UserEntity":{"type":"object","properties":{}},"CreateMetricDto":{"type":"object","properties":{"user_id":{"type":"number","description":"User ID","example":1},"metric_type":{"type":"string","description":"Type of metric","enum":["distance","temperature"],"example":"distance"},"value":{"type":"number","description":"Metric value","example":100.5},"unit":{"type":"string","description":"Unit of measurement","example":"meter"},"date_recorded":{"type":"string","description":"Date when metric was recorded","example":"2024-01-15"}},"required":["user_id","metric_type","value","unit","date_recorded"]},"MetricEntity":{"type":"object","properties":{}},"CreateMetricResponseDto":{"type":"object","properties":{"user_id":{"type":"number","description":"User ID","example":1},"metric_type":{"type":"string","description":"Type of metric","enum":["distance","temperature"],"example":"distance"},"value":{"type":"number","description":"Metric value","example":100.5},"unit":{"type":"string","description":"Unit of measurement","example":"meter"},"date_recorded":{"type":"string","description":"Date when metric was recorded","example":"2024-01-15"}},"required":["user_id","metric_type","value","unit","date_recorded"]},"MetricListResponseDto":{"type":"object","properties":{"data":{"description":"List of metrics","type":"array","items":{"$ref":"#/components/schemas/MetricEntity"}},"total":{"type":"number","description":"Total number of metrics","example":50},"page":{"type":"number","description":"Current page","example":1},"limit":{"type":"number","description":"Items per page","example":10},"totalPages":{"type":"number","description":"Total pages","example":5}},"required":["data","total","page","limit","totalPages"]},"ChartDataPointDto":{"type":"object","properties":{"date":{"type":"string","description":"Date of the metric","example":"2024-01-15"},"value":{"type":"number","description":"Metric value (converted if target unit specified)","example":100.5},"originalUnit":{"type":"string","description":"Original unit of the metric","example":"meter"},"convertedUnit":{"type":"string","description":"Converted unit (if conversion applied)","example":"centimeter"},"originalValue":{"type":"number","description":"Original value before conversion","example":1.005}},"required":["date","value","originalUnit"]},"ChartDataResponseDto":{"type":"object","properties":{"data":{"description":"Chart data points","type":"array","items":{"$ref":"#/components/schemas/ChartDataPointDto"}},"metricType":{"type":"string","description":"Metric type","example":"distance"},"timePeriod":{"type":"number","description":"Time period in months","example":1},"targetUnit":{"type":"string","description":"Target unit used for conversion","example":"meter"},"totalPoints":{"type":"number","description":"Total data points","example":30}},"required":["data","metricType","timePeriod","totalPoints"]}}}}